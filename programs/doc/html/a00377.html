<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.5"/>
<title>GravImage: montepython.mcmc Namespace Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">GravImage
   </div>
   <div id="projectbrief">Mass modelling tool for spherical and disk-like structures</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.5 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="namespaces.html"><span>Namespace&#160;List</span></a></li>
      <li><a href="namespacemembers.html"><span>Namespace&#160;Members</span></a></li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="a00319.html">montepython</a></li><li class="navelem"><a class="el" href="a00377.html">mcmc</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">montepython.mcmc Namespace Reference</div>  </div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:afe43e7f012200185aa6d457882ba90c3"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00377.html#afe43e7f012200185aa6d457882ba90c3">get_new_position</a></td></tr>
<tr class="memdesc:afe43e7f012200185aa6d457882ba90c3"><td class="mdescLeft">&#160;</td><td class="mdescRight">Obtain a new position in the parameter space from the eigen values of the inverse covariance matrix, or from the Cholesky decomposition (original idea by Anthony Lewis, in <code>Efficient sampling of fast and slow cosmological parameters &lt;<a href="http://arxiv.org/abs/1304.4473">http://arxiv.org/abs/1304.4473</a>&gt;</code>_ )  <a href="#afe43e7f012200185aa6d457882ba90c3">More...</a><br/></td></tr>
<tr class="separator:afe43e7f012200185aa6d457882ba90c3"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a01f54526f822cb599c5ade8ed226a8ff"><td class="memItemLeft" align="right" valign="top">def&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="a00377.html#a01f54526f822cb599c5ade8ed226a8ff">chain</a></td></tr>
<tr class="memdesc:a01f54526f822cb599c5ade8ed226a8ff"><td class="mdescLeft">&#160;</td><td class="mdescRight">MCMC CHAIN.  <a href="#a01f54526f822cb599c5ade8ed226a8ff">More...</a><br/></td></tr>
<tr class="separator:a01f54526f822cb599c5ade8ed226a8ff"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a01f54526f822cb599c5ade8ed226a8ff"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def montepython.mcmc.chain </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>cosmo</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>command_line</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>MCMC CHAIN. </p>
<p>Run a Markov chain of fixed length.</p>
<p>Main function of this module, this is the actual Markov chain procedure. After having selected a starting point in parameter space defining the first <b>last accepted</b> one, it will, for a given amount of steps :</p>
<ul>
<li>choose randomnly a new point following the <em>proposal density</em>,</li>
<li>compute the cosmological <em>observables</em> through the cosmological module,</li>
<li>compute the value of the <em>likelihoods</em> of the desired experiments at this point,</li>
<li><em>accept/reject</em> this point given its likelihood compared to the one of the last accepted one.</li>
</ul>
<p>Every time the code accepts :code:<code>data.write_step</code> number of points (quantity defined in the input parameter file), it will write the result to disk (flushing the buffer by forcing to exit the output file, and reopen it again.</p>
<p>.. note:: </p>
<pre class="fragment">to use the code to set a fiducial file for certain fixed parameters,
you can use two solutions. The first one is to put all input 1-sigma
proposal density to zero (this method still works, but is not
recommended anymore). The second one consist in using the flag "-f 0",
to force a step of zero amplitude.</pre> 
<p>Definition at line <a class="el" href="a00223_source.html#l00227">227</a> of file <a class="el" href="a00223_source.html">mcmc.py</a>.</p>

<p><div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="a00377_a01f54526f822cb599c5ade8ed226a8ff_cgraph.png" border="0" usemap="#a00377_a01f54526f822cb599c5ade8ed226a8ff_cgraph" alt=""/></div>
<map name="a00377_a01f54526f822cb599c5ade8ed226a8ff_cgraph" id="a00377_a01f54526f822cb599c5ade8ed226a8ff_cgraph">
<area shape="rect" id="node3" href="a00377.html#afe43e7f012200185aa6d457882ba90c3" title="Obtain a new position in the parameter space from the eigen values of the inverse covariance matrix..." alt="" coords="236,5,401,51"/></map>
</div>
</p>

</div>
</div>
<a class="anchor" id="afe43e7f012200185aa6d457882ba90c3"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">def montepython.mcmc.get_new_position </td>
          <td>(</td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>eigv</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>U</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>k</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>Cholesky</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>Inverse_Cholesky</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">&#160;</td>
          <td class="paramname"><em>Rotation</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>Obtain a new position in the parameter space from the eigen values of the inverse covariance matrix, or from the Cholesky decomposition (original idea by Anthony Lewis, in <code>Efficient sampling of fast and slow cosmological parameters &lt;<a href="http://arxiv.org/abs/1304.4473">http://arxiv.org/abs/1304.4473</a>&gt;</code>_ ) </p>
<p>The three different jumping options, decided when starting a run with the flag **-j** are <b>global</b> (by default), <b>sequential</b> and <b>fast</b> (see :mod:<code><a class="el" href="a00380.html">parser_mp</a></code> for reference).</p>
<p>.. warning:: </p>
<pre class="fragment">For running Planck data, the option **fast** is highly recommended, as
it speeds up the convergence. Note that when using this option, the
list of your likelihoods in your parameter file **must match** the
ordering of your nuisance parameters (as always, they must come after
the cosmological parameters, but they also must be ordered between
likelihood, with, preferentially, the slowest likelihood to compute
coming first).
</pre><ul>
<li><b>global</b>: varies all the parameters at the same time. Depending on the input covariance matrix, some degeneracy direction will be followed, otherwise every parameter will jump independently of each other.</li>
<li><b>sequential</b>: varies every parameter sequentially. Works best when having no clue about the covariance matrix, or to understand which estimated sigma is wrong and slowing down the whole process.</li>
<li><b>fast</b>: privileged method when running the Planck likelihood. Described in the aforementioned article, it separates slow (cosmological) and fast (nuisance) parameters.</li>
</ul>
<h2>Parameters </h2>
<p>eigv : numpy array Eigenvalues previously computed U : numpy_array Covariance matrix. k : int Number of points so far in the chain, is used to rotate through parameters Cholesky : numpy array Cholesky decomposition of the covariance matrix, and its inverse Rotation : numpy_array Not used yet </p>

<p>Definition at line <a class="el" href="a00223_source.html#l00093">93</a> of file <a class="el" href="a00223_source.html">mcmc.py</a>.</p>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sat Dec 20 2014 03:56:32 for GravImage by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.5
</small></address>
</body>
</html>
